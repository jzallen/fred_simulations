poetry_requirements(
    name="epistemix-reqs",
)

pex_binary(
    name="epistemix-cli",
    entry_point="epistemix_platform.cli:cli",
    dependencies=[
        "./src/epistemix_platform:lib",
        ":epistemix-reqs#click",
        ":epistemix-reqs#requests",
        ":epistemix-reqs#returns",
        ":epistemix-reqs#pydantic",
        ":epistemix-reqs#boto3",
        ":epistemix-reqs#botocore",
        ":epistemix-reqs#python-dotenv",
        ":epistemix-reqs#sqlalchemy",
    ],
)

python_tests(
    name="tests",
    sources=[
        "**/test_*.py",
        "!infrastructure/**",
    ],
    dependencies=[
        "./src/epistemix_platform:lib",
        "./tests:test-utils",
        "//:root#freezegun",
        "//:root#pytest"
    ],
)
