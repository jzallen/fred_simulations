# Root pyproject.toml for FRED Simulations project
# This file configures Ruff for Pants-native linting and formatting

[tool.ruff]
# Match existing Black settings
line-length = 100
target-version = "py311"

# Exclude fred-framework directory (C++ code)
extend-exclude = ["fred-framework"]

[tool.ruff.format]
# Use double quotes for strings (Black default)
quote-style = "double"

# Use spaces for indentation (Black default)
indent-style = "space"

# Respect magic trailing commas (Black default)
skip-magic-trailing-comma = false

# Auto-detect line endings (Black default)
line-ending = "auto"

[tool.ruff.lint]
# Enable pycodestyle (E), Pyflakes (F), isort (I), and additional quality rules
# E: pycodestyle errors
# F: Pyflakes (unused imports, undefined names)
# I: isort (import sorting)
# UP: pyupgrade (modernize Python code)
# B: flake8-bugbear (detect likely bugs)
# C4: flake8-comprehensions (better list/dict comprehensions)
# SIM: flake8-simplify (simplify code)
# TRY: tryceratops (exception handling best practices)
# ARG: flake8-unused-arguments (detect unused function arguments)
select = ["E", "F", "I", "UP", "B", "C4", "SIM", "TRY", "ARG"]

# Global ignores for rules with many violations that would require significant refactoring
#   TRY003: long exception messages in raise statements
#   SIM117: nested with statements that could be combined
#   SIM105: try/except blocks that could use contextlib.suppress
#   SIM103: if/else that could return condition directly
ignore = ["SIM103", "SIM105", "SIM117", "TRY003"]

# Per-file ignores for specific patterns
[tool.ruff.lint.per-file-ignores]
# Ignore line length (E501) in test files to allow descriptive test names
# using the pattern: test_<sut>__<condition(s)>__<outcome>
"**/test_*.py" = ["E501"]
"**/tests/**/*.py" = ["E501"]

[tool.ruff.lint.isort]
# Match existing isort settings (Black-compatible)
# Ruff's isort is Black-compatible by default
lines-after-imports = 2
