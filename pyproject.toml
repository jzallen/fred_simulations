# Root pyproject.toml for FRED Simulations project
# This file configures Ruff for Pants-native linting and formatting

[tool.ruff]
line-length = 100
target-version = "py311"

# Exclude fred-framework directory (C++ code)
extend-exclude = ["fred-framework"]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "auto"

[tool.ruff.lint]
# Enable pycodestyle (E), Pyflakes (F), isort (I), and additional quality rules
# E: pycodestyle errors
# F: Pyflakes (unused imports, undefined names)
# I: isort (import sorting)
# UP: pyupgrade (modernize Python code)
# B: flake8-bugbear (detect likely bugs)
# C4: flake8-comprehensions (better list/dict comprehensions)
# SIM: flake8-simplify (simplify code)
# TRY: tryceratops (exception handling best practices)
# ARG: flake8-unused-arguments (detect unused function arguments)
select = ["E", "F", "I", "UP", "B", "C4", "SIM", "TRY", "ARG"]

# Global ignores for rules that are stylistic preferences or would require significant refactoring
#   TRY003: Prefer explicit exception messages over extracted variables for readability (0 violations)
#   SIM117: Prefer explicit nested with statements for clarity (0 violations)
#   SIM105: Prefer explicit try/except over contextlib.suppress for visibility (0 violations)
ignore = ["SIM105", "SIM117", "TRY003"]

# Per-file ignores for specific patterns
[tool.ruff.lint.per-file-ignores]
# Ignore line length (E501) in test files to allow descriptive test names
# using the pattern: test_<sut>__<condition(s)>__<outcome>
"**/test_*.py" = ["E501"]
"**/tests/**/*.py" = ["E501"]

[tool.ruff.lint.isort]
lines-after-imports = 2
